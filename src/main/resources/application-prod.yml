# ========================================
# Production Profile - PostgreSQL
# Usage: Render will automatically use this with SPRING_PROFILES_ACTIVE=prod
# ========================================

spring:
  # PostgreSQL Database Configuration
  # Use separate environment variables for better compatibility
  datasource:
    url: ${DATABASE_URL}
    username: ${DATABASE_USERNAME}
    password: ${DATABASE_PASSWORD}
    driver-class-name: org.postgresql.Driver
    # Connection Pool Settings for Render
    hikari:
      maximum-pool-size: 5
      minimum-idle: 2
      connection-timeout: 30000
      idle-timeout: 600000
      max-lifetime: 1800000

  # JPA Configuration
  jpa:
    database-platform: org.hibernate.dialect.PostgreSQLDialect
    # IMPORTANT: Use 'update' for now, later switch to 'validate' with Flyway
    hibernate:
      ddl-auto: update
    show-sql: false
    properties:
      hibernate:
        format_sql: false

  # Disable H2 Console
  h2:
    console:
      enabled: false

# JWT Configuration (REQUIRED - Set these in Render environment variables)
# IMPORTANT: Generate a secure random secret for production!
# Command: openssl rand -base64 64 | tr -d '\n'
JWT_SECRET: ${JWT_SECRET}
JWT_EXPIRATION_MS: ${JWT_EXPIRATION_MS:3600000}
JWT_REFRESH_EXPIRATION_MS: ${JWT_REFRESH_EXPIRATION_MS:86400000}
# REFRESH_TOKEN_EXPIRATION_DAYS: Defaults to 7 in AuthController.java (optional override)

# Cookie Security (MUST be true in production for HTTPS)
COOKIE_SECURE: true

# Production Logging
logging:
  level:
    com.fivepapa.backend: INFO
    org.springframework.security: WARN
